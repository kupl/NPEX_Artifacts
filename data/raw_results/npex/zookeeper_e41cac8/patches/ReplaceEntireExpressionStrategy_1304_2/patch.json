{
    "contents": "if (connThrottle != null ? connThrottle.isConnectionWeightEnabled() : false) {\n    if (sessionId == 0) {\n        if (localSessionEnabled) {\n            tokensNeeded = connThrottle.getRequiredTokensForLocal();\n        } else {\n            tokensNeeded = connThrottle.getRequiredTokensForGlobal();\n        }\n    } else {\n        tokensNeeded = connThrottle.getRequiredTokensForRenew();\n    }\n}",
    "original_filepath": "zookeeper-server/src/main/java/org/apache/zookeeper/server/ZooKeeperServer.java",
    "patched_lines": [1299]
}